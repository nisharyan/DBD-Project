{% extends 'ITapp/base.html'%}
{% block sidebar %}
{% include 'ITapp/Sidebar.html'%}
{% endblock %}

{% block content %}
{% if user.is_authenticated %}

{% if not user.is_superuser %}
<h1>Permission not allowed</h1>

{% else %}

<div class="main-container">
  <h1>ChatBot Assistant</h1>
   <div id="chatbot-container">

   

  </div>

  <form id="form" method="get" accept-charset="utf-8">

   <input type="text" name="botvalue" id="botvalue" placeholder="Say something"/>

   <button type="submit" class="submit fab fa-telegram-plane"></button>

  </form>

  <button id="btn" type="button" onclick="startVoice()" class="fa fa-microphone"> start voice</button>

</div>

  

  
 </body>
<script>
  console.log("{{ISE_laptops}}") 
  let container=document.getElementById('chatbot-container');

let btn=document.getElementById('btn');

   let form=document.getElementById('form');

let arr1=[

  { name:"hello",text:"hi"},

  { name:"i am fine",text:"that's good to hear"},

    { name:"i\'m fine",text:"that\'s good to hear"},

  { name:"how are you",text:"i am fine,thanks, how about you?"},

  {

   name:"what is your name",text:"my name is vicbot"

  },

 { name:"what\'s your name",text:"my name is vicbot"

  },

  {

   name:"do you understand english",text:"sure,that\'s my mother language"

  },

  {

   name:"hi",text:"what\'s up"

  },

  {

   name:"what's up",text:"i'm good,thanks"

  },

  {

   name:"do you have a boyfriend",text:"nah, am single and happy"

  },

  {

   name:"can i be your boyfriend",text:"oh! no, i love our friendship"

  },

  {

   name:"why are you single",text:"because i don't like sharing my dessert "

  },

  {

   name:"do you love me",text:"yes, i do"

  },

  {

   name:"why do you love me",text:"because you're human"

  },

  {

   name:"why do you love humans",text:"i love humans because they created me"

  },

  {

   name:"what do you do for a living",text:"i talk for a living"

  },

  {

   name:"are you married",text:"no, I'm not"

  },

  {

   name:"why are you not married",text:"because i can't get married"

  },

  {

   name:"why can't you get married",text:"because am a robot"

  },

  {

   name:"will you marry me",text:"oh! sorry i can\'t, but we can be friends if you don\'t mind "

  },

  {

   name:"do you know siri",text:"yes i do"

  },

  {

   name:"who is siri",text:"she's a sister robot"

  },

  {

   name:"who are you",text:"am a robot"

  },

  {

   name:"how old are you",text:'i am few hours old'

  },

  {

   name:"who is your father",text:'his name is victory lucky chukwuede'

  },
  {

    name:"what is number of computer?",text:'There are {{desktops}} computers'
 
   },
   {

name:"what is number of computers?",text:'There are {{desktops}} computers'

},  {

name:"what is the number of computer?",text:'There are {{desktops}} computers'

},
{

name:"what is the number of computers?",text:'There are {{desktops}} computers'

},
   {

name:"what is number of laptop?",text:'There are {{laptops}} laptop'

},
{

name:"what is number of server?",text:'There are {{servers}} server'

},
{

name:"what is number of routers?",text:'There are {{routers}} routers'

},
{

name:"what is number of printers?",text:'There are {{printers}} printers'

},

{

name:"what is the number of desktops in ISE?",text:'There are ds {{ISE_desktops}} desktops in ISE'

},

{

name:"what is the number of laptops in ISE?",text:'There are {{ISE_laptops}} laptops in ISE'

},
{

name:"what is the number of printers in ISE?",text:'There are {{ISE_printers}} printers in ISE'

},

{

name:"what is the number of servers in ISE?",text:'There are {{ISE_servers}} servers in ISE'

},
{

name:"what is the number of routers in ISE?",text:'There are {{ISE_routers}} routers in ISE'

},


{

name:"what is the number of dektops in CSE?",text:'There are {{CSE_desktops}} desktops in CSE'

},

{

name:"what is the number of laptops in CSE?",text:'There are {{CSE_laptops}} laptops in CSE'

},
{

name:"what is the number of printers in CSE?",text:'There are {{CSE_printers}} printers in CSE'

},

{

name:"what is the number of servers in CSE?",text:'There are {{CSE_servers}} servers in CSE'

},
{

name:"what is the number of routers in CSE?",text:'There are {{CSE_routers}} routers in CSE'

},

{

name:"what is the number of dektops in EC?",text:'There are {{EC_desktops}} desktops in EC'

},

{

name:"what is the number of laptops in EC?",text:'There are {{EC_laptops}} laptops in EC'

},
{

name:"what is the number of printers in EC?",text:'There are {{EC_printers}} printers in EC'

},

{

name:"what is the number of servers in EC?",text:'There are {{EC_servers}} servers in EC'

},
{

name:"what is the number of routers in EC?",text:'There are {{EC_routers}} routers in EC'

},

{

name:"what is the number of dektops in EI?",text:'There are {{EI_desktops}} desktops in EI'

},

{

name:"what is the number of laptops in EI?",text:'There are {{EI_laptops}} laptops in EI'

},
{

name:"what is the number of printers in EI?",text:'There are {{EI_printers}} printers in EI'

},

{

name:"what is the number of servers in EI?",text:'There are {{EI_servers}} servers in EI'

},
{

name:"what is the number of routers in EI?",text:'There are {{EI_routers}} routers in EI'

},

{

name:"what is the number of dektops in Civil?",text:'There are {{CV_desktops}} desktops in CV'

},

{

name:"what is the number of laptops in Civil?",text:'There are {{CV_laptops}} laptops in CV'

},
{

name:"what is the number of printers in Civil?",text:'There are {{CV_.printers}} printers in CV'

},

{

name:"what is the number of servers in Civil?",text:'There are {{CV_servers}} servers in CV'

},
{

name:"what is the number of routers in Civil?",text:'There are {{CV_routers}} routers in CV'

},

{

name:"what is the number of dektops in BT?",text:'There are {{BT_desktops}} desktops in BT'

},

{

name:"what is the number of laptops in BT?",text:'There are {{BT_laptops}} laptops in BT'

},
{

name:"what is the number of printers in BT?",text:'There are {{BT_printers}} printers in BT'

},

{

name:"what is the number of servers in BT?",text:'There are {{BT_servers}} servers in BT'

},
{

name:"what is the number of routers in BT?",text:'There are {{BT_routers}} routers in BT'

},

{

name:"what is the number of dektops in EEE?",text:'There are {{EEE_desktops}} desktops in EEE'

},

{

name:"what is the number of laptops in EEE?",text:'There are {{EEE_laptops}} laptops in EEE'

},
{

name:"what is the number of printers in EEE?",text:'There are {{EEE_printers}} printers in EEE'

},

{

name:"what is the number of servers in EEE?",text:'There are {{EEE_servers}} servers in EEE'

},
{

name:"what is the number of routers in EEE?",text:'There are {{EEE_routers}} routers in EEE'

},

{

name:"what is the number of dektops in IEM?",text:'There are {{IEM_desktops}} desktops in IEM'

},

{

name:"what is the number of laptops in IEM?",text:'There are {{IEM_laptops}} laptops in IEM'

},
{

name:"what is the number of printers in IEM?",text:'There are {{IEM_printers}} printers in IEM'

},

{

name:"what is the number of servers in IEM?",text:'There are {{IEM_servers}} servers in IEM'

},
{

name:"what is the number of routers in IEM?",text:'There are {{IEM_routers}} routers in IEM'

},

{

name:"what is the number of dektops in ISE?",text:'There are {{ISE_desktops}} desktops in ISE'

},

{

name:"what is the number of laptops in ISE?",text:'There are {{ISE_laptops}} laptops in ISE'

},
{

name:"what is the number of printers in ISE?",text:'There are {{ISE_printers}} printers in ISE'

},

{

name:"what is the number of servers in ISE?",text:'There are {{ISE_servers}} servers in ISE'

},
{

name:"what is the number of routers in ISE?",text:'There are {{ISE_routers}} routers in ISE'

},

];

const SpeechRecognition=window.SpeechRecognition || window.webkitSpeechRecognition ;

const recorder=new SpeechRecognition();

recorder.onstart=()=>{

console.log('voice is active');

 btn.innerHTML=" voice is active";

}

recorder.onend=()=>{

  btn.innerHTML=" start voice";

}

function botVoice(message){

 const speech= new SpeechSynthesisUtterance();

 speech.text="i don't understand that";

 for(let botData of arr1){

  if(message.includes(botData.name.toLowerCase())){

   speech.text=botData.text

  }

 }

container.innerHTML+=`<p class="speech">${speech.text}</p>`;

speech.volume=1;

speech.rate=1;

speech.pitch=1;

 window.speechSynthesis.speak(speech);

}

recorder.onresult=(event)=>{

 console.log(event);

 const current=event.resultIndex;

  const transcript=event.results[current][0].transcript;

   container.innerHTML+=`<p class="recorder">${transcript}</p>`;

   botVoice(transcript.toLowerCase());

}

function startVoice(){

 recorder.start();

}

form.onsubmit=(e)=>{

 e.preventDefault();

    let formInput=document.getElementById('botvalue').value;

if(formInput==''){

 return false;

}

else{

container.innerHTML+=`<p class="recorder">${formInput}</p>`;

    botVoice(formInput.toLowerCase());

form.reset();

   return true;

}

}
</script>
 {% endif %}
 {% endif %} 
 {% endblock %}